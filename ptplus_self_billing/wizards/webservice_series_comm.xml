<?xml version="1.0" encoding="utf-8" ?>
<odoo>

    <record id="inherit_wizard_webservice_series_comm_form" model="ir.ui.view">
            <field name="name">inherit_wizard_webservice.series.comm.form</field>
            <field name="model">wizard.webservice.series.comm</field>
            <field name="inherit_id" ref="ptplus.wizard_webservice_series_comm_form" />
            <field name="arch" type="xml">

                <field name="error" position="after">
                    <div
                    attrs="{'invisible':['|', ('service_name','!=','registarSerieAutofaturacao'), ('state', '!=', 'select')]}"
                >
                        <p>
                            You're about to electronically register this series on the Tax
                            Authority system. Once registered, you will not be able to modify
                            it. If you later find out it contains some type of error, you'll
                            be able to cancel it, provided no related fiscal documents were
                            produced. Otherwise, you can finalize it and end the series lifecycle.
                        </p>
                    </div>
                    <div
                    attrs="{'invisible':['|', ('service_name','not in',['consultarSeriesAutofaturacao']), ('state', '!=', 'select')]}"
                >
                        <p
                    > You're about to import to Odoo a series that you have previously
                            registered on the Tax Authority system. You have 2 options:<br
                        /><br />
                            Online - Make sure the series matches all the below filters and
                            press the Communicate button. The series identifier will be obtained
                            from the Tax Authority portal, together with other data that will be
                            used for validation.<br />
                            Offline - Enter the pre-registered series identifier and press Validate.
                            No validation will be performed.<br /><br />
                            Either way, if the process succeeds, a new Odoo
                            sequence will be created and associated with this fiscal document
                            type. A default value of 5 will be used for padding. You can tune it
                            after the sequence creation. Also make sure you check and eventually
                            <strong
                        >adjust the sequence's next number</strong> as the number
                            returned by the Tax authority may be out of date.
                        </p>
                    </div>
                    <div
                    attrs="{'invisible':['|', ('service_name','not in',['consultarAcordosAutofaturacao']), ('state', '!=', 'select')]}"
                >
                        <p>
                            You are about to check in the Tax Authority (AT) system whether the current
                            partner has an existing contract. This process is straightforward and can be
                            initiated by clicking on the Communicate button. Upon doing so, our
                            system will conduct a real-time verification with the AT system to check
                            any existing contract information associated with this partner.
                        </p>

                    </div>
                    <div
                    attrs="{'invisible':['|', ('service_name','!=','anularSerieAutofaturacao'), ('state', '!=', 'select')]}"
                >
                        <p>
                            Use this process if the series has become useless or contains some
                            kind of error and there are no related fiscal documents. If there
                            are, finalize it instead.
                        </p>
                    </div>
                    <div
                    attrs="{'invisible':['|', ('service_name','!=','finalizarSerieAutofaturacao'), ('state', '!=', 'select')]}"
                >
                        <p>
                            Finalizing a series means it has reached the end of its lifecycle and
                            no more fiscal documents will be created from it. If it has no related
                            fiscal documents, you should cancel it instead.
                        </p>
                    </div>
                </field>

                <field name="company_id" position="after">
                    <field
                    name="register_start_date"
                    attrs="{'invisible':[('service_name','!=','registarSerieAutofaturacao')],'required':[('service_name','=','registarSerieAutofaturacao')]}"
                />
                    <field
                    name="register_initial_number"
                    attrs="{'invisible':[('service_name','!=','registarSerieAutofaturacao')],'required':[('service_name','=','registarSerieAutofaturacao')]}"
                />
                    <field
                    name="cancel_reason"
                    attrs="{'invisible':[('service_name','!=','anularSerieAutofaturacao')],'required':[('service_name','=','anularSerieAutofaturacao')]}"
                />
                    <field
                    name="cancel_non_use_declaration"
                    attrs="{'invisible':[('service_name','!=','anularSerieAutofaturacao')],'required':[('service_name','=','anularSerieAutofaturacao')]}"
                />
                    <field
                    name="finalize_last_number"
                    string="Last Doc. No."
                    attrs="{'invisible':[('service_name','!=','finalizarSerieAutofaturacao')],'required':[('service_name','=','finalizarSerieAutofaturacao')]}"
                />
                    <field
                    name="finalize_justification"
                    attrs="{'invisible':[('service_name','!=','finalizarSerieAutofaturacao')]}"
                />
                    <field
                    name="self_billing_state"
                    attrs="{'invisible':[('service_name','!=','consultarAcordosAutofaturacao')]}"
                />
                    <field
                    name="self_billing_authorization_from"
                    attrs="{'invisible':[('service_name','!=','consultarAcordosAutofaturacao')]}"
                />
                    <field
                    name="self_billing_authorization_to"
                    attrs="{'invisible':[('service_name','!=','consultarAcordosAutofaturacao')]}"
                />
                    <field
                    name="sync_method"
                    attrs="{'invisible':[('service_name','!=','consultarSeriesAutofaturacao')]}"
                />
                    <field
                    name="sync_doc_type"
                    attrs="{'invisible':['|', ('sync_method', '!=', 'online'), ('service_name','!=','consultarSeriesAutofaturacao')]}"
                />
                    <field
                    name="sync_series_type"
                    attrs="{'invisible':['|', ('sync_method', '!=', 'online'), ('service_name','!=','consultarSeriesAutofaturacao')]}"
                />
                    <field
                    name="sync_series_state"
                    attrs="{'invisible':['|', ('sync_method', '!=', 'online'), ('service_name','!=','consultarSeriesAutofaturacao')]}"
                />
                    <field
                    name="sync_proc_means"
                    attrs="{'invisible':['|', ('sync_method', '!=', 'online'), ('service_name','!=','consultarSeriesAutofaturacao')]}"
                />
                    <field
                    name="sync_validation_code"
                    attrs="{'invisible':['|', ('sync_method', '!=', 'online'), ('service_name','!=','consultarSeriesAutofaturacao')],
                                'required':[('service_name','=','consultarSeriesAutofaturacao')]}"
                />
                    <field
                    name="sync_series_identifier"
                    attrs="{'invisible':['|', ('sync_method', '=', 'online'), ('service_name','!=','consultarSeriesAutofaturacao')],
                                'required':[('sync_method', '=', 'offline'), ('service_name','=','consultarSeriesAutofaturacao')]}"
                />
                </field>
                <field name='outcome' position="after">
                    <separator
                    string="Self-Billing Deals"
                    attrs="{'invisible': ['|', ('service_name', '!=', 'consultarAcordosAutofaturacao'), ('self_billing_deals_ids', '=', [])]}"
                />
                    <field
                    name="self_billing_deals_ids"
                    attrs="{'invisible': ['|', ('service_name', '!=', 'consultarAcordosAutofaturacao'), ('self_billing_deals_ids', '=', [])]}"
                >
                        <tree>
                            <field name="company_id" invisible="1" />
                            <field name="wizard_webservice_service_id" invisible="1" />
                            <field name="is_synced" string="Synced" />
                            <field name="registered_agreement" optional="hide" />
                            <field name="purchaser_name" optional="hide" />
                            <field name="purchaser_vat" optional="hide" />
                            <field
                            name="vat_associated_with_agreement"
                            optional="show"
                        />
                            <field name="agreement_tax_id_name" optional="show" />
                            <field name="foreign_country" optional="show" />
                            <field name="state" optional="hide" />
                            <field name="authorization_period_from" optional="show" />
                            <field name="authorization_period_to" optional="show" />
                            <!--<button
                                name="create_fiscal_document_types"
                                type="object"
                                string="Create"
                                help="This will create two fiscal documents: one invoice and one credit note.
                                 Both documents will be associated with the respective supplier and
                                 will be in the 'Draft' state, ready for further processing and confirmation."
                            />-->
                        </tree>
                    </field>
                </field>
            </field>
        </record>

</odoo>
